```sheet
|  ▷▶▷▶ Query 실행 순서 ▷▶▷▶  | < | < | < | < | < | < | < | < | < |
| :----: | :------: | :---------------: | :------: | :------------: | :------: | :---------------: | :------: | :------------: | :------------: |
|  [With](1.%20With)  |   [From](2.%20From%20&%20Join)   |       [Where](3.%20Where%20&%20Group%20By%20&%20Having#^where)       | [Group by](3.%20Where%20&%20Group%20By%20&%20Having#^groupby) |     [Having](3.%20Where%20&%20Group%20By%20&%20Having#^having)     | [Select](4.%20Select) | [Distinct](연산자#^distinct) | [Union / Union all](연산자#^union) | [Order by](5.%20Order%20By%20&%20Offset%20&%20Limit#^orderby) | [Offset](5.%20Order%20By%20&%20Offset%20&%20Limit#^offset) / [Limit](5.%20Order%20By%20&%20Offset%20&%20Limit#^limit) |
```
 - Current_timestamp (현재시간)
 - Date 날짜
	 - `SELECT DATE '2022-10-16';`
 - Time 시간
	 - `SELECT TIME '14:30:00'; `
 - Timestamp 날짜+시간 `[PostgreSQL , Oracle]`
	 - `SELECT TIMESTAMP '2022-10-16 14:30:00'`
 - Datetime 날짜+시간 `[MySQL , MS-SQL]`
	 - `SELECT DATETIME '2022-10-16 14:30:00'`
 - EXTRACT / DATEPART (YEAR, MONTH, DAY)
	 - 비교 연산 시 Year or Month 가 변경되는 상황을 계산 못함
		 - 비교 연산 시 Interval 사용
		 - `extract(day from r.return_date) > extract(day from r.rental_date) + f.rental_duration 
			 - Error
	 - Column Type 이 Date Type 인 경우 날짜/시간 값 추출
		 - `DATEPART(year, [date_column]) = 2023`
		 - `YEAR([date_column]) = '2014'`
		 - `MONTH([date_column]) = '08'`
		 - `DAY([date_column]) = '10';`
	 - PostgreSQL
		 - `WHERE EXTRACT(YEAR FROM [date_column]) = 2003`
 - 일수 차이 계산
	 - 1일 - 1일 = 0일 => 당일은 제외하고 계산되니 사용에 주의
	 - End_date Column >= Start_date Column + 29일
		 - `DATEDIFF(END_DATE, START_DATE) >= 29`
		 - `END_DATE >= (START_DATE + INTERVAL '29' DAY)`
			 - INTERVAL : 시간 간격을 나타내기 위해 정의
				 - `INTERVAL '20' MINUTE` = 20분
				 - `INTERVAL '30' HOUR`= 30시간
				 - `INTERVAL '40' DAY` = 40일
				 - `INTERVAL '50' MONTH` = 50개월
				 - `INTERVAL '60' YEAR` = 60년
	 - Start_date Column >= End_date Column - 70일
		 - `DATEDIFF(END_DATE, START_DATE) < 70`
		 - `START_DATE >= (END_DATE - INTERVAL '70' DAY)`
 - Date Column 을 분기 (1 ~ 4) 값으로 출력
	 - `QUARTER(Date Column)`
	 - 수학 함수를 사용하여 출력
		 - `CEIL(MONTH(Date Column) / 3.0)`
		 - `FLOOR((MONTH(Date Column)-1)/3 + 1)`
			 - 모든 SQL 에서 사용 가능
 - 시간 기간의 겹침을 확인하는 구문
	 - `A.END_TIME > B.START_TIME AND A.START_TIME < B.END_TIME`
		 - 확인을 하되 대상을 지정해주는 구문은 아님
		 - B.ID < A.ID 구문 등으로 대상 지정이 필수
			 - Join On 으로 연결 대상 지정
 - Interval
	 - 날짜 / 시간을 산술연산하기 위해 사용되는 Data Type
	 - 연산을 위한 값을 직접 지정할 수 있고, Column을 연결할 수도 있음
	 - `f.rental_duration * INTERVAL '1 day'`
		 - f.rental_duration 는 정수값 Column 
		 - Cast를 사용하는 방법 보다 좀 더 적은 Cost, 가독성
	 - `cast(f.rental_duration||'days' as interval)`
		 - f.rental_duration Column에  || (+) 'days'을 추가한 문자열을 Interval Type 변환
 - JUSTIFY_INTERVAL
	 - Interval 계산 값의 평균을 구하는 등 집계 함수 사용시 정리되지 않은 시간을 깔끔하게 정리
		 - 일자와 시간을 따로 계산하기에 JUSTIFY_INTERVAL 미사용시 시간 출력 이상발생
		 - JUSTIFY_INTERVAL(avg(연체일))
	 - 함수 적용 전, 후 (justify_interval)
		 - 2 days 25:05:55.28 // 3 days 01:05:55.28
		 - 2 days 19:01:57.32 // 2 days 19:01:57.32 (변화 없음)
 - generate_series
	 - A 부터 B 사이의 간격을 지정하여 출력
		 - `select generate_series from generate_series('2023-07-22 00:00'::timestamp, '2023-07-25 08:00'::timestamp, '10 hours')`
			![[Pasted image 20251224142046.png]]