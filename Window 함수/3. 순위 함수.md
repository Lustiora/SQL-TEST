```sheet
|  ▷▶▷▶ Query 실행 순서 ▷▶▷▶  | < | < | < | < | < | < | < | < | < |
| :----: | :------: | :---------------: | :------: | :------------: | :------: | :---------------: | :------: | :------------: | :------------: |
|  [With](1.%20With)  |   [From](2.%20From%20&%20Join)   |       [Where](3.%20Where%20&%20Group%20By%20&%20Having#^where)       | [Group by](3.%20Where%20&%20Group%20By%20&%20Having#^groupby) |     [Having](3.%20Where%20&%20Group%20By%20&%20Having#^having)     | [Select](4.%20Select) | [Distinct](연산자#^distinct) | [Union / Union all](연산자#^union) | [Order by](5.%20Order%20By%20&%20Offset%20&%20Limit#^orderby) | [Offset](5.%20Order%20By%20&%20Offset%20&%20Limit#^offset) / [Limit](5.%20Order%20By%20&%20Offset%20&%20Limit#^limit) |
```
 - **Rank()**
	 - `rank() over(order by size_of_colony desc)`
	 - 지정 column 의 값에 따른 순위를 출력 (공동1순위가 있을 시 다음 3순위)

<p></p>

 - **백분위수 순위**
	 - Percent_rank() 
		 - 0 ~ 1 사이 값을 반환하며 전체 Column 값의 비율을 계산하여 출력 
		 - 지정 column 을 내림차순 (desc) 정렬하고 0에 가까울 수록 높은 비율을 보유
			 - * 100 을 추가 계산하여 퍼센트 값으로 표시
```sql
case 
when (Percent_rank() over(order by size_of_colony desc)*100) between 0 and 25 then 'CRITICAL' 
when (Percent_rank() over(order by size_of_colony desc)*100) between 26 and 50 then 'HIGH' 
when (Percent_rank() over(order by size_of_colony desc)*100) between 51 and 75 then 'MEDIUM' 
else 'LOW' end
```
 - 
	 - Ntile()
		 - 균등 분할의 경우 Percent_rank() 보다 편하게 사용 가능
```sql 
	case 
	when Ntile(4) over(order by size_of_colony desc) = 1 then 'CRITICAL' 
	when Ntile(4) over(order by size_of_colony desc) = 2 then 'HIGH' 
	when Ntile(4) over(order by size_of_colony desc) = 3 then 'MEDIUM' 
	else 'LOW' end
	-- 지정 column을 4분할, 출력 값이 낮을 수록 높은 순위
	```
![[Pasted image 20251224161912.png]]